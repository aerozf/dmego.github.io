{"title":"fastJosn使用总结","date":"2018-05-13T19:56:00.000Z","author":"Dmego","link":"2018/05/13/using-fastjson","comments":true,"tags":["JSON","Java"],"categories":["技术"],"updated":"2019-12-22T18:21:32.545Z","content":"<a id=\"more\"></a>\n<center>\n<img src=\"/2018/05/13/using-fastjson/cE7H2aLhmC.jpg\" width=\"250px\">\n</center>\n<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#前言\"></a> 前言<a href=\"2018/05/13/using-fastjson#前言\"></a></h2>\n<p>最近在开发过程中使用了大量的<code>json</code>作为前后端数据交换的方式,由于之前没有对<code>json</code>做过系统的学习,所有在使用过程中查阅了大量的文档与资料,这里主要记录了我在开发后对<code>json</code>以及<code>fastjson</code>使用的总结</p>\n<h2 id=\"json-介绍\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#json-介绍\"></a> JSON 介绍<a href=\"2018/05/13/using-fastjson#json-介绍\"></a></h2>\n<p><code>JSON</code>(javaScript Object Notation)是一种轻量级的数据交换格式。主要采用键值对(<code>{&quot;name&quot;: &quot;json&quot;}</code>)的方式来保存和表示数据。<code>JSON</code>是<code>JS</code>对象的字符串表示法，它使用文本表示一个<code>JS</code>对象的信息，本质上是一个字符串。更多简介见<a href=\"http://www.json.org/json-zh.html\" target=\"_blank\" rel=\"noopener\">介绍JSON</a>。</p>\n<h2 id=\"fastjson-简介\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#fastjson-简介\"></a> fastjson 简介<a href=\"2018/05/13/using-fastjson#fastjson-简介\"></a></h2>\n<p>在日志解析,前后端数据传输交互中,经常会遇到字符串(String)与<code>json</code>,<code>XML</code>等格式相互转换与解析，其中<code>json</code>以跨语言，跨前后端的优点在开发中被频繁使用，基本上可以说是标准的数据交换格式。<a href=\"https://github.com/alibaba/fastjson\" target=\"_blank\" rel=\"noopener\">fastjson</a>是一个java语言编写的高性能且功能完善的JSON库，它采用一种“假定有序快速匹配”的算法，把<code>JSON Parse</code> 的性能提升到了极致。它的接口简单易用，已经被广泛使用在缓存序列化，协议交互，Web输出等各种应用场景中。</p>\n<h2 id=\"fastjson-常用-api\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#fastjson-常用-api\"></a> fastjson 常用 API<a href=\"2018/05/13/using-fastjson#fastjson-常用-api\"></a></h2>\n<p>fastjson API 入口类是<code>com.alibaba.fastjson.JSON</code>,常用的序列化操作都可以在<code>JSON</code>类上的静态方法直接完成。</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object <span class=\"title\">parse</span><span class=\"params\">(String text)</span></span>; <span class=\"comment\">// 把JSON文本parse为JSONObject或者JSONArray </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> JSONObject <span class=\"title\">parseObject</span><span class=\"params\">(String text)</span>； <span class=\"comment\">// 把JSON文本parse成JSONObject    </span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> &lt;T&gt; T <span class=\"title\">parseObject</span><span class=\"params\">(String text, Class&lt;T&gt; clazz)</span></span>; <span class=\"comment\">// 把JSON文本parse为JavaBean </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> JSONArray <span class=\"title\">parseArray</span><span class=\"params\">(String text)</span></span>; <span class=\"comment\">// 把JSON文本parse成JSONArray </span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> &lt;T&gt; <span class=\"function\">List&lt;T&gt; <span class=\"title\">parseArray</span><span class=\"params\">(String text, Class&lt;T&gt; clazz)</span></span>; <span class=\"comment\">//把JSON文本parse成JavaBean集合 </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String <span class=\"title\">toJSONString</span><span class=\"params\">(Object object)</span></span>; <span class=\"comment\">// 将JavaBean序列化为JSON文本 </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String <span class=\"title\">toJSONString</span><span class=\"params\">(Object object, <span class=\"keyword\">boolean</span> prettyFormat)</span></span>; <span class=\"comment\">// 将JavaBean序列化为带格式的JSON文本 </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object <span class=\"title\">toJSON</span><span class=\"params\">(Object javaObject)</span></span>; <span class=\"comment\">//将JavaBean转换为JSONObject或者JSONArray。</span></span><br></pre></td></tr></table></div></figure>\n<h3 id=\"使用方法举例\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#使用方法举例\"></a> 使用方法举例<a href=\"2018/05/13/using-fastjson#使用方法举例\"></a></h3>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//将JSON文本转换为java对象</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.alibaba.fastjson.JSON;</span><br><span class=\"line\">Model model = JSON.parseObject(jsonStr, Model.class);</span><br></pre></td></tr></table></div></figure>\n<h3 id=\"有关类库的一些说明\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#有关类库的一些说明\"></a> 有关类库的一些说明<a href=\"2018/05/13/using-fastjson#有关类库的一些说明\"></a></h3>\n<ul>\n<li>JSONArray : 相当于 <code>List&lt;Object&gt;</code></li>\n<li>JSONObject: 相当于 <code>Map&lt;String,Object&gt;</code></li>\n</ul>\n<h2 id=\"fastjson-使用实例\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#fastjson-使用实例\"></a> fastjson 使用实例<a href=\"2018/05/13/using-fastjson#fastjson-使用实例\"></a></h2>\n<h3 id=\"java对象与json字符串的互转\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#java对象与json字符串的互转\"></a> java对象与JSON字符串的互转<a href=\"2018/05/13/using-fastjson#java对象与json字符串的互转\"></a></h3>\n<p>User测试类</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * User测试类</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> dmego</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String username;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String password;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">User</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">User</span><span class=\"params\">(String username,String password)</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.username = username;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.password = password;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getUsername</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> username;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUsername</span><span class=\"params\">(String username)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.username = username;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getPassword</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> password;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setPassword</span><span class=\"params\">(String password)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.password = password;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"string\">\"User [username=\"</span> + username + <span class=\"string\">\", password=\"</span> + password + <span class=\"string\">\"]\"</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>UserGroup测试类</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 用户组测试类</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> dmego</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserGroup</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String name;  </span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;User&gt; users = <span class=\"keyword\">new</span> ArrayList&lt;User&gt;();</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">UserGroup</span><span class=\"params\">()</span></span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">UserGroup</span><span class=\"params\">(String name,List&lt;User&gt; users)</span></span>&#123;</span><br><span class=\"line\">    \t<span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">    \t<span class=\"keyword\">this</span>.users = users;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> name;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> List&lt;User&gt; <span class=\"title\">getUsers</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> users;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setUsers</span><span class=\"params\">(List&lt;User&gt; users)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.users = users;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">toString</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"string\">\"UserGroup [name=\"</span> + name + <span class=\"string\">\", users=\"</span> + users + <span class=\"string\">\"]\"</span>;</span><br><span class=\"line\">\t&#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>fastJson测试类</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> demo;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.alibaba.fastjson.JSON;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * fastJson测试类</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> dmego</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TestFastJosn</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * java对象转 json字符串 </span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Test</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">objectTOJson</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">//简单java类转json字符串</span></span><br><span class=\"line\">\t\tUser user = <span class=\"keyword\">new</span> User(<span class=\"string\">\"dmego\"</span>, <span class=\"string\">\"123456\"</span>);</span><br><span class=\"line\">\t\tString UserJson = JSON.toJSONString(user);</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"简单java类转json字符串:\"</span>+UserJson);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">//List&lt;Object&gt;转json字符串</span></span><br><span class=\"line\">\t\tUser user1 = <span class=\"keyword\">new</span> User(<span class=\"string\">\"zhangsan\"</span>, <span class=\"string\">\"123123\"</span>);</span><br><span class=\"line\">\t\tUser user2 = <span class=\"keyword\">new</span> User(<span class=\"string\">\"lisi\"</span>, <span class=\"string\">\"321321\"</span>);</span><br><span class=\"line\">\t\tList&lt;User&gt; users = <span class=\"keyword\">new</span> ArrayList&lt;User&gt;();</span><br><span class=\"line\">\t\tusers.add(user1);</span><br><span class=\"line\">\t\tusers.add(user2);</span><br><span class=\"line\">\t\tString ListUserJson = JSON.toJSONString(users);</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"List&lt;Object&gt;转json字符串:\"</span>+ListUserJson);\t</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">//复杂java类转json字符串</span></span><br><span class=\"line\">\t\tUserGroup userGroup = <span class=\"keyword\">new</span> UserGroup(<span class=\"string\">\"userGroup\"</span>, users);</span><br><span class=\"line\">\t\tString userGroupJson = JSON.toJSONString(userGroup);</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"复杂java类转json字符串:\"</span>+userGroupJson);\t\t</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">\t * json字符串转java对象</span></span><br><span class=\"line\"><span class=\"comment\">\t * 注：字符串中使用双引号需要转义 (\" --&gt; \\\"),这里使用的是单引号</span></span><br><span class=\"line\"><span class=\"comment\">\t */</span></span><br><span class=\"line\">\t<span class=\"meta\">@Test</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">JsonTOObject</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">/* json字符串转简单java对象</span></span><br><span class=\"line\"><span class=\"comment\">\t     * 字符串：&#123;\"password\":\"123456\",\"username\":\"dmego\"&#125;*/</span></span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tString jsonStr1 = <span class=\"string\">\"&#123;'password':'123456','username':'dmego'&#125;\"</span>;</span><br><span class=\"line\">\t\tUser user = JSON.parseObject(jsonStr1, User.class);</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"json字符串转简单java对象:\"</span>+user.toString());</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * json字符串转List&lt;Object&gt;对象</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * 字符串：[&#123;\"password\":\"123123\",\"username\":\"zhangsan\"&#125;,&#123;\"password\":\"321321\",\"username\":\"lisi\"&#125;]</span></span><br><span class=\"line\"><span class=\"comment\">\t\t */</span></span><br><span class=\"line\">\t\tString jsonStr2 = <span class=\"string\">\"[&#123;'password':'123123','username':'zhangsan'&#125;,&#123;'password':'321321','username':'lisi'&#125;]\"</span>;</span><br><span class=\"line\">\t\tList&lt;User&gt; users = JSON.parseArray(jsonStr2, User.class);</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"json字符串转List&lt;Object&gt;对象:\"</span>+users.toString());</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">/*json字符串转复杂java对象</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * 字符串：&#123;\"name\":\"userGroup\",\"users\":[&#123;\"password\":\"123123\",\"username\":\"zhangsan\"&#125;,&#123;\"password\":\"321321\",\"username\":\"lisi\"&#125;]&#125;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t * */</span></span><br><span class=\"line\">\t\tString jsonStr3 = <span class=\"string\">\"&#123;'name':'userGroup','users':[&#123;'password':'123123','username':'zhangsan'&#125;,&#123;'password':'321321','username':'lisi'&#125;]&#125;\"</span>;</span><br><span class=\"line\">\t\tUserGroup userGroup = JSON.parseObject(jsonStr3, UserGroup.class);</span><br><span class=\"line\">\t\tSystem.out.println(<span class=\"string\">\"json字符串转复杂java对象:\"</span>+userGroup);\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>输出结果</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">简单java类转json字符串:&#123;<span class=\"string\">\"password\"</span>:<span class=\"string\">\"123456\"</span>,<span class=\"string\">\"username\"</span>:<span class=\"string\">\"dmego\"</span>&#125;</span><br><span class=\"line\">List&lt;Object&gt;转json字符串:[&#123;<span class=\"string\">\"password\"</span>:<span class=\"string\">\"123123\"</span>,<span class=\"string\">\"username\"</span>:<span class=\"string\">\"zhangsan\"</span>&#125;,&#123;<span class=\"string\">\"password\"</span>:<span class=\"string\">\"321321\"</span>,<span class=\"string\">\"username\"</span>:<span class=\"string\">\"lisi\"</span>&#125;]</span><br><span class=\"line\">复杂java类转json字符串:&#123;<span class=\"string\">\"name\"</span>:<span class=\"string\">\"userGroup\"</span>,<span class=\"string\">\"users\"</span>:[&#123;<span class=\"string\">\"password\"</span>:<span class=\"string\">\"123123\"</span>,<span class=\"string\">\"username\"</span>:<span class=\"string\">\"zhangsan\"</span>&#125;,&#123;<span class=\"string\">\"password\"</span>:<span class=\"string\">\"321321\"</span>,<span class=\"string\">\"username\"</span>:<span class=\"string\">\"lisi\"</span>&#125;]&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">json字符串转简单java对象:User [username=dmego, password=<span class=\"number\">123456</span>]</span><br><span class=\"line\">json字符串转List&lt;Object&gt;对象:[User [username=zhangsan, password=<span class=\"number\">123123</span>], User [username=lisi, password=<span class=\"number\">321321</span>]]</span><br><span class=\"line\">json字符串转复杂java对象:UserGroup [name=userGroup, users=[User [username=zhangsan, password=<span class=\"number\">123123</span>], User [username=lisi, password=<span class=\"number\">321321</span>]]]</span><br></pre></td></tr></table></div></figure>\n<h3 id=\"fastjson-解析复杂嵌套json字符串\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#fastjson-解析复杂嵌套json字符串\"></a> fastjson 解析复杂嵌套json字符串<a href=\"2018/05/13/using-fastjson#fastjson-解析复杂嵌套json字符串\"></a></h3>\n<p>这个实例是我在开发中用到的，先给出要解析的json字符串</p>\n<figure class=\"highlight json\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>: <span class=\"string\">\"user_list\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"id\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"tableName\"</span>: <span class=\"string\">\"用户列表\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"className\"</span>: <span class=\"string\">\"cn.dmego.domain.User\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"column\"</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"rowIndex\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"header\"</span>: <span class=\"string\">\"序号\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"width\"</span>: <span class=\"string\">\"50\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"allowSort\"</span>: <span class=\"string\">\"false\"</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"id\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"header\"</span>: <span class=\"string\">\"id\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"hidden\"</span>: <span class=\"string\">\"true\"</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"name\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"header\"</span>: <span class=\"string\">\"姓名\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"width\"</span>: <span class=\"string\">\"100\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"allowSort\"</span>: <span class=\"string\">\"true\"</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"id\"</span>: <span class=\"string\">\"role_list\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"id\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"tableName\"</span>: <span class=\"string\">\"角色列表\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"className\"</span>: <span class=\"string\">\"cn.dmego.domain.Role\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"column\"</span>: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"rowIndex\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"header\"</span>: <span class=\"string\">\"序号\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"width\"</span>: <span class=\"string\">\"50\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"allowSort\"</span>: <span class=\"string\">\"false\"</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"id\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"header\"</span>: <span class=\"string\">\"id\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"hidden\"</span>: <span class=\"string\">\"true\"</span></span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"name\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"header\"</span>: <span class=\"string\">\"名称\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"width\"</span>: <span class=\"string\">\"100\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"allowSort\"</span>: <span class=\"string\">\"true\"</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></div></figure>\n<p>要想解析这种复杂的字符串，首先得先定义好与之相符的java POJO 对象，经过观察，我们发现，这个是一个json对象数组，每一个对象里包含了许多属性，其中还有一个属性的类型也是对象数组。所有，我们从里到外，先定义最里面的对象：</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Column</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String key;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String header;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String width;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String allowSort;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String hidden;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getKey</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> key;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setKey</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.key = key;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//这里省略部分getter与setter方法\t</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>再定义外层的对象：</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.commons.collections4.map.LinkedMap;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Query</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String id;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String key;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String tableName;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String className;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;LinkedMap&lt;String, Object&gt;&gt; column; </span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;Column&gt; columnList;</span><br><span class=\"line\">    </span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getId</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> id;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setId</span><span class=\"params\">(String id)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.id = id;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">    <span class=\"comment\">//这里省略部分getter与setter方法\t</span></span><br><span class=\"line\">\t<span class=\"keyword\">public</span> List&lt;LinkedMap&lt;String, Object&gt;&gt; getColumn() &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> column;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setColumn</span><span class=\"params\">(List&lt;LinkedMap&lt;String, Object&gt;&gt; column)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.column = column;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> List&lt;Column&gt; <span class=\"title\">getColumnList</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> columnList;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setColumnList</span><span class=\"params\">(List&lt;Column&gt; columnList)</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">this</span>.columnList = columnList;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>我的这个json文件放置在类路径下，最后想将这个json字符串转化为List<query>对象，并且将column 对象数组转化为query对象里的List<column>属性<br>\n而实际转化过程中，fastjson将column对象数组转化为List<map>;所有我们还需要将Map类型转化为object类型才能满足需求。</map></column></query></p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 读取类路径下的配置文件</span></span><br><span class=\"line\"><span class=\"comment\"> * 解析成对象数组并返回</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@throws</span> IOException</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> List&lt;Query&gt; <span class=\"title\">test</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 读取类路径下的query.json文件</span></span><br><span class=\"line\">\tClassLoader cl = <span class=\"keyword\">this</span>.getClass().getClassLoader();</span><br><span class=\"line\">\tInputStream inputStream = cl.getResourceAsStream(<span class=\"string\">\"query.json\"</span>);</span><br><span class=\"line\">\tString jsontext = IOUtils.toString(inputStream, <span class=\"string\">\"utf8\"</span>);</span><br><span class=\"line\">\t<span class=\"comment\">// 先将字符jie串转为List数组</span></span><br><span class=\"line\">\tList&lt;Query&gt; queryList = JSON.parseArray(jsontext, Query.class);</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (Query query : queryList) &#123;</span><br><span class=\"line\">\t\tList&lt;Column&gt; columnList = <span class=\"keyword\">new</span> ArrayList&lt;Column&gt;();</span><br><span class=\"line\">\t\tList&lt;LinkedMap&lt;String,Object&gt;&gt; columns = query.getColumn();</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (LinkedMap&lt;String, Object&gt; linkedMap : columns) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//将map转化为java实体类</span></span><br><span class=\"line\">\t\t\tColumn column = (Column)map2Object(linkedMap, Column.class);</span><br><span class=\"line\">\t\t\tSystem.out.println(column.toString());</span><br><span class=\"line\">\t\t\tcolumnList.add(column);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tquery.setColumnList(columnList); <span class=\"comment\">//为columnList属性赋值</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> queryList;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * Map转成实体对象</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> map map实体对象包含属性</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> clazz 实体对象类型</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Object <span class=\"title\">map2Object</span><span class=\"params\">(Map&lt;String, Object&gt; map, Class&lt;?&gt; clazz)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (map == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       Object obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">           obj = clazz.newInstance();</span><br><span class=\"line\">           Field[] fields = obj.getClass().getDeclaredFields();</span><br><span class=\"line\">           <span class=\"keyword\">for</span> (Field field : fields) &#123;</span><br><span class=\"line\">               <span class=\"keyword\">int</span> mod = field.getModifiers();</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (Modifier.isStatic(mod) || Modifier.isFinal(mod)) &#123;</span><br><span class=\"line\">                   <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               field.setAccessible(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">               String flag = (String) map.get(field.getName());</span><br><span class=\"line\">               <span class=\"keyword\">if</span>(flag != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">               \t<span class=\"keyword\">if</span>(flag.equals(<span class=\"string\">\"false\"</span>) || flag.equals(<span class=\"string\">\"true\"</span>))&#123;</span><br><span class=\"line\">                   \tfield.set(obj, Boolean.parseBoolean(flag));</span><br><span class=\"line\">                   &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                   \tfield.set(obj, map.get(field.getName()));</span><br><span class=\"line\">                   &#125;</span><br><span class=\"line\">               &#125;                </span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">           e.printStackTrace();</span><br><span class=\"line\">       &#125; </span><br><span class=\"line\">       <span class=\"keyword\">return</span> obj;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"参考\"><a class=\"markdownIt-Anchor\" href=\"2018/05/13/using-fastjson#参考\"></a> 参考<a href=\"2018/05/13/using-fastjson#参考\"></a></h2>\n<ul>\n<li><a href=\"https://github.com/alibaba/fastjson\" target=\"_blank\" rel=\"noopener\">fastJson</a></li>\n<li><a href=\"http://kimmking.github.io/2017/06/06/json-best-practice/#9-fastjson_u7684_u6700_u4F73_u5B9E_u8DF5\" target=\"_blank\" rel=\"noopener\">JSON最佳实践</a></li>\n<li><a href=\"http://www.json.org/json-zh.html\" target=\"_blank\" rel=\"noopener\">介绍 JSON</a></li>\n<li><a href=\"https://www.w3cschool.cn/fastjson/\" target=\"_blank\" rel=\"noopener\">W3Cschool FastJson 教程</a></li>\n</ul>\n","prev":{"title":"基于ubuntu16.04快速构建Hyperledger Fabric网络","link":"2018/05/14/quick-start-hyperledger-fabric"},"next":{"title":"微信小程序：出发吧一起","link":"2017/12/04/wechat-app-together"},"plink":"https://dmego.me/2018/05/13/using-fastjson/","toc":[{"title":"<a class=\"markdownIt-Anchor\"></a> 前言","id":"前言","index":"1"},{"title":"<a class=\"markdownIt-Anchor\"></a> JSON 介绍","id":"json-介绍","index":"2"},{"title":"<a class=\"markdownIt-Anchor\"></a> fastjson 简介","id":"fastjson-简介","index":"3"},{"title":"<a class=\"markdownIt-Anchor\"></a> fastjson 常用 API","id":"fastjson-常用-api","index":"4","children":[{"title":"<a class=\"markdownIt-Anchor\"></a> 使用方法举例","id":"使用方法举例","index":"4.1"},{"title":"<a class=\"markdownIt-Anchor\"></a> 有关类库的一些说明","id":"有关类库的一些说明","index":"4.2"}]},{"title":"<a class=\"markdownIt-Anchor\"></a> fastjson 使用实例","id":"fastjson-使用实例","index":"5","children":[{"title":"<a class=\"markdownIt-Anchor\"></a> java对象与JSON字符串的互转","id":"java对象与json字符串的互转","index":"5.1"},{"title":"<a class=\"markdownIt-Anchor\"></a> fastjson 解析复杂嵌套json字符串","id":"fastjson-解析复杂嵌套json字符串","index":"5.2"}]},{"title":"<a class=\"markdownIt-Anchor\"></a> 参考","id":"参考","index":"6"}],"copyright":{"link":"<a href=\"https://dmego.me/2018/05/13/using-fastjson/\" title=\"fastJosn使用总结\">https://dmego.me/2018/05/13/using-fastjson/</a>","license":"自由转载-非商用-禁止演绎-保持署名(<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}